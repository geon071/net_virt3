# Домашнее задание к занятию «Компоненты Kubernetes»

<details>
  <summary><b>Задание. Необходимо определить требуемые ресурсы</b></summary>

Известно, что проекту нужны база данных, система кеширования, а само приложение состоит из бекенда и фронтенда. Опишите, какие ресурсы нужны, если известно:

1. Необходимо упаковать приложение в чарт для деплоя в разные окружения.
2. База данных должна быть отказоустойчивой. Потребляет 4 ГБ ОЗУ в работе, 1 ядро. 3 копии.
3. Кеш должен быть отказоустойчивый. Потребляет 4 ГБ ОЗУ в работе, 1 ядро. 3 копии.
4. Фронтенд обрабатывает внешние запросы быстро, отдавая статику. Потребляет не более 50 МБ ОЗУ на каждый экземпляр, 0.2 ядра. 5 копий.
5. Бекенд потребляет 600 МБ ОЗУ и по 1 ядру на копию. 10 копий.

</details>

## Ответ

Согласно описанным требованиям на прикладные нужды всего нам понадобиться Количество под - 3 + 3 + 5 + 10 = 21 пода, CPU - (1 * 3) + (1 * 3) + (0.2 * 5) + (1 * 10) = 17 ядер, RAM - (4 * 3) + (4 * 3) + (0.05 * 5) + (0.6 * 10) = 32 ГБ

Учитывая условия по запасу нам понадобиться добавить +1 рабочую ноду

Для отказоустойчивости БД и кеша, они будут размещаться по одной поде на каждой ноде итого получается требуется + 3 рабочей ноды

Итого получается 4 рабочих ноды, можно попробовать взять конфигурацию одной ноды 8 CPU, 16 RAM

Если мы на одну ноду будем распределять поды следующим образом: 1 БД, 1 Кеш, 2 Фронта, 4 Бэка, общее количество занятых ресурсов будет следующее:

CPU = 1 + 1 + (0.2 * 2) + (4 * 1) = 6.4 ядра (на ноде 8)
RAM = 4 + 4 + 0.1 + (0.6 * 4) = 10.5 RAM (на ноде 16)

Получается итоговая конфигурация кластера по рабочим нодам - 4 ноды, по 8 ядер и 16 RAM